(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(4),o=n.n(r),i=(n(21),n(3)),s=(n(22),n(7)),l=n(1);function u(e){var t=e.onSubmit,n=Object(c.useState)(""),a=Object(i.a)(n,2),r=a[0],o=a[1];return Object(l.jsx)("header",{className:"Searchbar",children:Object(l.jsxs)("form",{className:"SearchForm",onSubmit:function(e){e.preventDefault(),""!==r.trim()?(t(r.trim()),o("")):s.b.info("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043b\u044c \u043f\u043e\u0438\u0441\u043a\u0430!")},children:[Object(l.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(l.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(l.jsx)("input",{name:"searchText",className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"\u041f\u043e\u0438\u0441\u043a \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u0438 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439",value:r,onChange:function(e){var t=e.currentTarget.value;o(t)}})]})})}var j=n(10);function b(e){var t=e.id,n=e.webformatURL,c=e.onClick;return Object(l.jsx)("li",{className:"ImageGalleryItem",children:Object(l.jsx)("img",{src:n,id:t,alt:"",className:"ImageGalleryItem-image",onClick:c})})}var d=n(9),h=n.n(d),m=n(11),f=function(){var e=Object(m.a)(h.a.mark((function e(t,n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://pixabay.com/api","/?image_type=photo&orientation=horizontal&q=").concat(t,"&page=").concat(n,"&per_page=12&key=").concat("21855327-aca65fff95f12487eb72f2b8c"));case 2:if(!(c=e.sent).ok){e.next=5;break}return e.abrupt("return",c.json());case 5:return e.next=7,Promise.reject(new Error("\u041d\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 '".concat(t,"'")));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=n(12),p=n.n(O),v=(n(45),n(13)),x=n(14),g=n(16),y=n(15),w=document.querySelector("#modal-root"),k=function(e){Object(g.a)(n,e);var t=Object(y.a)(n);function n(){var e;Object(v.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).keyDowmModal=function(t){"Escape"===t.code&&e.props.onClose(),"ArrowLeft"===t.code&&e.props.onList(-1),"ArrowRight"===t.code&&e.props.onList(1)},e.clickFoOverlay=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(x.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.keyDowmModal)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.keyDowmModal)}},{key:"render",value:function(){return Object(r.createPortal)(Object(l.jsx)("div",{className:"Overlay",onClick:this.clickFoOverlay,children:Object(l.jsx)("div",{className:"Modal",children:this.props.children})}),w)}}]),n}(c.Component);function S(e){var t=e.searchText,n=Object(c.useState)([]),a=Object(i.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)("idle"),u=Object(i.a)(s,2),d=u[0],h=u[1],m=Object(c.useState)(!1),O=Object(i.a)(m,2),v=O[0],x=O[1],g=Object(c.useState)(null),y=Object(i.a)(g,2),w=y[0],S=y[1],N=Object(c.useState)(0),C=Object(i.a)(N,2),L=C[0],E=C[1],D=Object(c.useState)(null),F=Object(i.a)(D,2),I=F[0],T=F[1],G=function(){x((function(e){return!e}))},M=function(e){var t=e.target.id,n=r.map((function(e){return String(e.id)})).indexOf(t);S(n),G()};return Object(c.useEffect)((function(){""!==t&&(h("pending"),f(t,1).then((function(e){e.hits.length?(o(e.hits),h("resolved"),E(1)):(T('\u041d\u0435\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 "'.concat(t,'"')),h("rejected"))})).catch((function(e){T(e.message),h("rejected")})))}),[t]),Object(c.useEffect)((function(){1!==L&&window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}),[L]),"idle"===d?Object(l.jsx)("div",{}):"pending"===d?Object(l.jsx)("div",{className:"conteinGallery",children:Object(l.jsx)(p.a,{type:"ThreeDots",color:"#3f51b5",height:100,width:100})}):"rejected"===d?Object(l.jsxs)("div",{className:"conteinGallery",children:[Object(l.jsx)("h1",{children:I}),";"]}):"resolved"===d?Object(l.jsxs)("div",{className:"conteinGallery",children:[Object(l.jsx)("ul",{className:"ImageGallery",children:r.map((function(e){var t=e.id,n=e.webformatURL;return Object(l.jsx)(b,{webformatURL:n,id:t,onClick:M},t)}))}),Object(l.jsx)("button",{className:"Button",onClick:function(e){e.preventDefault(),f(t,L+1).then((function(e){o((function(t){return[].concat(Object(j.a)(t),Object(j.a)(e.hits))})),E((function(e){return e+1}))}))},children:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435"}),v&&Object(l.jsx)(k,{onClose:G,onList:function(e){var t=w;(t+=e)<0&&(t=r.length-1),t===r.length&&(t=0),S(t)},children:Object(l.jsx)("img",{src:r[w].largeImageURL,alt:""})})]}):void 0}n(46);function N(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)(u,{onSubmit:a}),Object(l.jsx)(s.a,{autoClose:3e3,position:"top-center"}),Object(l.jsx)(S,{searchText:n})]})}o.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.98b7fd82.chunk.js.map